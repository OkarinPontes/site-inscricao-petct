<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscrição - Intensive Training in PET/CT for Cardiology and Oncology</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* Apply the Inter font to the body */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom focus styles for better accessibility */
        .focus-style:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            --tw-ring-color: #3b82f6; /* blue-500 */
            --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);
            --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);
            box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);
        }
        /* Style for disabled select */
        select:disabled {
            background-color: #e5e7eb; /* gray-200 */
            cursor: not-allowed;
        }
        /* Style for disabled button */
        button:disabled {
            background-color: #d1d5db; /* gray-300 */
            cursor: not-allowed;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 antialiased">

    <div class="container mx-auto px-4 py-8 md:py-12 max-w-3xl">

        <!-- Event Header -->
        <header class="text-center mb-10">
            <img src="uploaded:Logo.jpg-73c858c7-8c19-467f-93d3-b7ec3cc28225" alt="Logo do Evento Intensive Training in PET/CT" class="mx-auto mb-5 w-36 h-36 object-contain">
            <h1 class="text-2xl md:text-4xl font-bold text-gray-900">
                Intensive Training in PET/CT for Cardiology and Oncology
            </h1>
            <p class="text-md text-gray-600 mt-2">Patrocinado pela IAEA</p>
        </header>

        <!-- Registration Form -->
        <main class="bg-white rounded-xl shadow-md p-6 sm:p-8 md:p-10">
            <h2 class="text-2xl font-semibold text-center text-gray-800 mb-8">Formulário de Inscrição</h2>
            
            <form action="https://formsubmit.co/itpetct@outlook.com" method="POST" class="space-y-8">
                
                <!-- FormSubmit Subject -->
                <input type="hidden" name="_subject" value="Nova Inscrição - Intensive Training in PET/CT">
                
                <!-- Category: Identification -->
                <fieldset class="border border-gray-200 rounded-lg p-6">
                    <legend class="text-lg font-medium text-gray-900 px-2">IDENTIFICAÇÃO</legend>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                        <div class="md:col-span-2">
                            <label for="nome" class="block text-sm font-medium text-gray-700 mb-1">Nome Completo</label>
                            <input type="text" id="nome" name="Nome Completo" placeholder="Seu nome completo" required class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus-style focus:border-blue-500 sm:text-sm">
                        </div>
                        <div class="md:col-span-2">
                            <label for="nome_cracha" class="block text-sm font-medium text-gray-700 mb-1">Nome para Crachá (até 2 nomes)</label>
                            <input type="text" id="nome_cracha" name="Nome para Crachá" placeholder="Ex: Pedro Pontes" required class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus-style focus:border-blue-500 sm:text-sm">
                            <p id="cracha-error" class="text-red-500 text-xs mt-1 hidden">Por favor, insira no máximo dois nomes.</p>
                        </div>
                        <div>
                            <label for="data_nascimento" class="block text-sm font-medium text-gray-700 mb-1">Data de Nascimento</label>
                            <input type="date" id="data_nascimento" name="Data de Nascimento" required class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus-style focus:border-blue-500 sm:text-sm">
                        </div>
                        <div>
                            <label for="nacionalidade" class="block text-sm font-medium text-gray-700 mb-1">Nacionalidade</label>
                            <select id="nacionalidade" name="Nacionalidade" required class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus-style focus:border-blue-500 sm:text-sm">
                                <option value="">Selecione...</option>
                                <option value="Brasileira">Brasileira</option>
                                <option value="Estrangeira">Estrangeira</option>
                            </select>
                        </div>
                        <div id="pais_origem_container" class="hidden md:col-span-2">
                            <label for="pais_origem" class="block text-sm font-medium text-gray-700 mb-1">País de Origem</label>
                            <input type="text" id="pais_origem" name="País de Origem" placeholder="Seu país de origem" class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus-style focus:border-blue-500 sm:text-sm">
                        </div>
                        <div>
                            <label for="estado_nascimento" class="block text-sm font-medium text-gray-700 mb-1">Estado de Nascimento</label>
                            <select id="estado_nascimento" name="Estado de Nascimento" required class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus-style focus:border-blue-500 sm:text-sm">
                                <option value="">Carregando estados...</option>
                            </select>
                        </div>
                        <div>
                            <label for="cidade_nascimento" class="block text-sm font-medium text-gray-700 mb-1">Cidade de Nascimento</label>
                            <select id="cidade_nascimento" name="Cidade de Nascimento" required disabled class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus-style focus:border-blue-500 sm:text-sm">
                                <option value="">Selecione um estado primeiro</option>
                            </select>
                        </div>
                    </div>
                </fieldset>

                <!-- Category: Institutional -->
                <fieldset class="border border-gray-200 rounded-lg p-6">
                    <legend class="text-lg font-medium text-gray-900 px-2">INSTITUCIONAL</legend>
                    <div class="grid grid-cols-1 gap-6 mt-4">
                         <div>
                            <label for="instituicao" class="block text-sm font-medium text-gray-700 mb-1">Instituição</label>
                            <input type="text" id="instituicao" name="Instituição" placeholder="Nome da sua instituição" required class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus-style focus:border-blue-500 sm:text-sm">
                        </div>
                        <div>
                            <label for="cargo" class="block text-sm font-medium text-gray-700 mb-1">Cargo</label>
                            <select id="cargo" name="Cargo" required class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus-style focus:border-blue-500 sm:text-sm">
                                <option value="">Selecione...</option>
                                <option value="Médico Nuclear">Médico Nuclear</option>
                                <option value="Radiologista">Radiologista</option>
                                <option value="Residente em Medicina Nuclear">Residente em Medicina Nuclear</option>
                                <option value="Residente em Radiologia">Residente em Radiologia</option>
                                <option value="Estudante de Medicina">Estudante de Medicina</option>
                                <option value="Física Médica">Física Médica</option>
                                <option value="Outros">Outros</option>
                            </select>
                        </div>
                        <div id="cargo_outros_container" class="hidden">
                            <label for="cargo_outros" class="block text-sm font-medium text-gray-700 mb-1">Especifique o Cargo</label>
                            <input type="text" id="cargo_outros" name="Cargo (Outros)" placeholder="Especifique seu cargo" class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus-style focus:border-blue-500 sm:text-sm">
                        </div>
                    </div>
                </fieldset>

                <!-- Category: Contact -->
                <fieldset class="border border-gray-200 rounded-lg p-6">
                    <legend class="text-lg font-medium text-gray-900 px-2">CONTATO</legend>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                        <div>
                            <label for="telefone" class="block text-sm font-medium text-gray-700 mb-1">Telefone</label>
                            <input type="tel" id="telefone" name="Telefone" placeholder="(XX) XXXXX-XXXX" required class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus-style focus:border-blue-500 sm:text-sm">
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                            <input type="email" id="email" name="Email" placeholder="seu.email@exemplo.com" required class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus-style focus:border-blue-500 sm:text-sm">
                        </div>
                    </div>
                </fieldset>

                <!-- Submit Button -->
                <div class="text-center pt-4">
                    <button type="submit" disabled class="w-full sm:w-auto inline-flex justify-center py-3 px-8 border border-transparent shadow-sm text-base font-medium rounded-md text-white focus-style focus:ring-offset-2 transition-colors">
                        Realizar Inscrição
                    </button>
                </div>
            </form>

        </main>

        <!-- Footer -->
        <footer class="text-center mt-12 text-sm text-gray-500">
            <p>&copy; 2024 Intensive Training in PET/CT. Todos os direitos reservados.</p>
        </footer>

    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.querySelector('form');
            const submitButton = form.querySelector('button[type="submit"]');
            const allFields = Array.from(form.querySelectorAll('input, select'));

            const crachaInput = document.getElementById('nome_cracha');
            const crachaError = document.getElementById('cracha-error');
            const nacionalidadeSelect = document.getElementById('nacionalidade');
            const paisOrigemContainer = document.getElementById('pais_origem_container');
            const paisOrigemInput = document.getElementById('pais_origem');
            const estadoSelect = document.getElementById('estado_nascimento');
            const cidadeSelect = document.getElementById('cidade_nascimento');
            const cargoSelect = document.getElementById('cargo');
            const cargoOutrosContainer = document.getElementById('cargo_outros_container');
            const cargoOutrosInput = document.getElementById('cargo_outros');

            // Função para verificar a validade de todo o formulário
            const checkFormValidity = () => {
                let isFormValid = true;

                // Verifica todos os campos que possuem o atributo 'required'
                const requiredFields = Array.from(form.querySelectorAll('[required]'));
                for (const field of requiredFields) {
                    if (!field.value.trim()) {
                        isFormValid = false;
                        break;
                    }
                }

                // Também verifica a contagem de nomes do crachá
                const words = crachaInput.value.trim().split(/\s+/).filter(word => word.length > 0);
                if (words.length > 2) {
                    isFormValid = false;
                }
                
                // Habilita ou desabilita o botão com base na validade
                if (isFormValid) {
                    submitButton.disabled = false;
                    submitButton.classList.remove('bg-gray-300', 'cursor-not-allowed');
                    submitButton.classList.add('bg-blue-600', 'hover:bg-blue-700');
                } else {
                    submitButton.disabled = true;
                    submitButton.classList.add('bg-gray-300', 'cursor-not-allowed');
                    submitButton.classList.remove('bg-blue-600', 'hover:bg-blue-700');
                }
            };

            // Adiciona ouvintes de eventos a todos os campos para verificar a validade em cada alteração
            allFields.forEach(field => {
                field.addEventListener('input', checkFormValidity);
                field.addEventListener('change', checkFormValidity); // Para selects, datas, etc.
            });

            // --- Lógica Específica dos Campos ---

            // Validação do nome para o crachá (feedback em tempo real)
            crachaInput.addEventListener('input', () => {
                const words = crachaInput.value.trim().split(/\s+/).filter(word => word.length > 0);
                crachaError.classList.toggle('hidden', words.length <= 2);
            });

            // Lógica para Nacionalidade
            nacionalidadeSelect.addEventListener('change', () => {
                const isEstrangeira = nacionalidadeSelect.value === 'Estrangeira';
                paisOrigemContainer.classList.toggle('hidden', !isEstrangeira);
                paisOrigemInput.required = isEstrangeira;
                if (!isEstrangeira) paisOrigemInput.value = ''; // Limpa o campo
                checkFormValidity(); // Revalida o formulário, pois 'required' mudou
            });

            // Lógica para Cargo
            cargoSelect.addEventListener('change', () => {
                const isOutros = cargoSelect.value === 'Outros';
                cargoOutrosContainer.classList.toggle('hidden', !isOutros);
                cargoOutrosInput.required = isOutros;
                if (!isOutros) cargoOutrosInput.value = ''; // Limpa o campo se não for necessário
                checkFormValidity(); // Revalida o formulário, pois 'required' mudou
            });

            // Lógica para carregar estados e cidades do Brasil via API do IBGE
            fetch('https://servicodados.ibge.gov.br/api/v1/localidades/estados?orderBy=nome')
                .then(response => response.json())
                .then(data => {
                    estadoSelect.innerHTML = '<option value="">Selecione um estado</option>';
                    data.forEach(estado => {
                        const option = document.createElement('option');
                        option.value = estado.sigla;
                        option.textContent = estado.nome;
                        estadoSelect.appendChild(option);
                    });
                })
                .catch(error => {
                    console.error('Erro ao buscar estados:', error);
                    estadoSelect.innerHTML = '<option value="">Erro ao carregar estados</option>';
                });

            estadoSelect.addEventListener('change', () => {
                const estadoUF = estadoSelect.value;
                cidadeSelect.disabled = true;
                cidadeSelect.innerHTML = '<option value="">Carregando cidades...</option>';

                if (!estadoUF) {
                    cidadeSelect.innerHTML = '<option value="">Selecione um estado primeiro</option>';
                    checkFormValidity();
                    return;
                }

                fetch(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${estadoUF}/municipios`)
                    .then(response => response.json())
                    .then(data => {
                        cidadeSelect.innerHTML = '<option value="">Selecione uma cidade</option>';
                        data.forEach(cidade => {
                            const option = document.createElement('option');
                            option.value = cidade.nome;
                            option.textContent = cidade.nome;
                            cidadeSelect.appendChild(option);
                        });
                        cidadeSelect.disabled = false;
                    })
                    .catch(error => {
                        console.error('Erro ao buscar cidades:', error);
                        cidadeSelect.innerHTML = '<option value="">Erro ao carregar cidades</option>';
                    });
            });
            
            // Verificação final no envio, como uma garantia
            form.addEventListener('submit', (e) => {
                const words = crachaInput.value.trim().split(/\s+/).filter(word => word.length > 0);
                if (words.length > 2) {
                    e.preventDefault(); // Impede o envio do formulário
                    crachaError.classList.remove('hidden');
                    crachaInput.focus();
                }
            });

            // Verificação inicial para definir o estado do botão no carregamento da página
            checkFormValidity();
        });
    </script>

</body>
</html>
